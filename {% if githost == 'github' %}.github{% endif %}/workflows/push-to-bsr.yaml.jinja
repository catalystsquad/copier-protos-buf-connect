name: Push protos to buf
on:
  release:
    types: [created]
jobs:
  buf-push:
    name: Push protos to buf bsr
    runs-on: ubuntu-latest
    steps:
      - uses: crazy-max/ghaction-dump-context@v1
      - uses: catalystsquad/action-buf@v1
        with:
{% raw %}
          token: ${{ secrets.AUTOMATION_PAT }}
          buf-user: ${{ secrets.BUF_USER }}
          buf-token: ${{ secrets.BUF_TOKEN }}
{% endraw %}
          lint: false
          generate: false
          breaking: false
          mod-prune: false
          mod-update: false
          push: true
          push-dir: {{pkgdir}}
